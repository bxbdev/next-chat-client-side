(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9767:function(e,s,t){Promise.resolve().then(t.bind(t,7151))},7151:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),n=t(3388),r=t(2265);let l=n.ZP.connect("http://localhost:3001");function c(){let[e,s]=(0,r.useState)(""),[t,n]=(0,r.useState)(""),[c,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{l.on("receive_message",e=>{console.log(e),i(s=>[...s,{userId:e.userId,message:e.message}])})},[l]),(0,a.jsxs)("main",{className:"grid place-center py-10",children:[(0,a.jsx)("h2",{className:"text-2xl text-center",children:o?"room ".concat(t," "):"Enter a room number"}),(0,a.jsxs)("div",{className:"grid gap-3 max-w-3xl m-auto py-5",children:[o&&(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{className:"border border-gray-500 p-4",type:"text",value:e,onChange:e=>s(e.target.value)}),(0,a.jsx)("button",{className:"bg-blue-600 text-white py-2 px-5",onClick:()=>{s(""),i(s=>[...s,{userId:l.id,message:e}]),l.emit("send_message",{room:t,userId:l.id,message:e})},children:"Send Message"})]}),(0,a.jsx)("div",{className:"flex",children:o?(0,a.jsx)("button",{className:"bg-blue-600 text-white py-2 px-5",onClick:()=>{d(!1),n(""),i(""),s(""),l.emit("leave_room",t),l.emit("send_message",{room:t,userId:"system",message:"".concat(l.id," left")})},children:"Leave Room"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{className:"border border-gray-500 p-4",type:"text",value:t,onChange:e=>n(e.target.value)}),(0,a.jsx)("button",{className:"bg-blue-600 text-white py-2 px-5",onClick:()=>{let e="welcome ".concat(l.id," joined");l.emit("join_room",t),l.emit("send_message",{room:t,userId:"system",message:e}),d(!0),i(s=>[...s,{userId:"system",message:e}])},children:"Join Room"})]})})]}),(0,a.jsx)("div",{className:"message p-10",children:o&&c.map((e,s)=>{let{userId:t,message:n}=e;return(0,a.jsx)("div",{className:"flex",children:"system"===t?(0,a.jsx)("div",{children:n}):(0,a.jsxs)("div",{children:[t,": ",n]})},s)})})]})}}},function(e){e.O(0,[506,971,596,744],function(){return e(e.s=9767)}),_N_E=e.O()}]);