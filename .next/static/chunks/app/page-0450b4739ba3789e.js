(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9767:function(e,s,t){Promise.resolve().then(t.bind(t,7151))},7151:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var n=t(7437),r=t(3388),a=t(2265);function c(){let[e,s]=(0,a.useState)(null),[t,c]=(0,a.useState)(null),[o,l]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[m,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!1),g=(0,r.ZP)("https://server.seekdecor.online");return(0,a.useEffect)(()=>(g.on("connect",()=>{c(g.id)}),g.on("receive_message",e=>{u(s=>[...s,{userId:e.userId,message:e.message}])}),g.on("connect_error",e=>{console.error("Connected error: ",e)}),g.on("disconnect",()=>{console.log("Disconnected")}),s(g),()=>{e&&g.disconnect()}),[]),(0,n.jsxs)("main",{className:"grid place-center py-10",children:[(0,n.jsx)("h2",{className:"text-2xl text-center",children:x?"room ".concat(o," "):"Enter a room number"}),(0,n.jsxs)("div",{className:"grid gap-3 max-w-3xl m-auto py-5",children:[x&&(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{className:"border border-gray-500 p-4",type:"text",value:i,onChange:e=>d(e.target.value)}),(0,n.jsx)("button",{className:"bg-blue-600 text-white py-2 px-5",onClick:()=>{d(""),u(e=>[...e,{userId:t,message:i}]),e.emit("send_message",{room:o,userId:t,message:i})},children:"Send Message"})]}),(0,n.jsx)("div",{className:"flex",children:x?(0,n.jsx)("button",{className:"bg-blue-600 text-white py-2 px-5",onClick:()=>{h(!1),l(""),u(""),d(""),e.emit("leave_room",o),e.emit("send_message",{room:o,userId:"system",message:"".concat(t," left")})},children:"Leave Room"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{className:"border border-gray-500 p-4",type:"text",value:o,onChange:e=>l(e.target.value)}),(0,n.jsx)("button",{className:"bg-blue-600 text-white py-2 px-5",onClick:()=>{let s="welcome ".concat(t," joined");e.emit("join_room",o),e.emit("send_message",{room:o,userId:"system",message:s}),h(!0),u(e=>[...e,{userId:"system",message:s}])},children:"Join Room"})]})})]}),(0,n.jsx)("div",{className:"message p-10",children:x&&m.map((e,s)=>{let{userId:t,message:r}=e;return(0,n.jsx)("div",{className:"flex",children:"system"===t?(0,n.jsx)("div",{children:r}):(0,n.jsxs)("div",{children:[t,": ",r]})},s)})})]})}}},function(e){e.O(0,[506,971,596,744],function(){return e(e.s=9767)}),_N_E=e.O()}]);